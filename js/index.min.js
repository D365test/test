function updateFlag(e,t){t?(e.title="Remove flag",e.classList.add("flagged"),e.classList.remove("unflagged")):(e.title="Flag this diagram",e.classList.add("unflagged"),e.classList.remove("flagged"))}function flagClick(e){const t=e.target.nextSibling.pathname.slice(1,-4),l=Flags.indexOf(t);-1===l?(Flags.push(t),updateFlag(e.target,!0)):(Flags.splice(l,1),updateFlag(e.target,!1)),localStorage.setItem(StoreName.Flags,JSON.stringify(Flags))}function flagAllClick(e){e.preventDefault(),Flags=[];const t=document.getElementsByClassName("link-text");for(const e of t){const t=e.pathname.slice(1,-4);Flags.push(t),updateFlag(e.previousSibling,!0)}const l=JSON.stringify(Flags);localStorage.setItem(StoreName.Flags,l)}function clearFlagsClick(e){e.preventDefault(),Flags=[];const t=JSON.stringify(Flags);localStorage.setItem(StoreName.Flags,t);const l=document.getElementsByClassName("link-text");for(const e of l)updateFlag(e.previousSibling,!1)}function setupFlags(){const e=localStorage.getItem(StoreName.Flags);e&&(Flags=JSON.parse(e));const t=document.getElementsByClassName("flag-button");for(const e of t){e.addEventListener("click",flagClick);const t=e.nextSibling.pathname.slice(1,-4);updateFlag(e,Flags.includes(t))}document.getElementById("clear-all").addEventListener("click",clearFlagsClick),document.getElementById("flag-all").addEventListener("click",flagAllClick)}function DOMContentLoaded(){isEmbedded()&&(document.getElementById("footer").style.display="none"),setupOfflineIndicator(),setupFlags()}let Flags=[];document.addEventListener("DOMContentLoaded",DOMContentLoaded);